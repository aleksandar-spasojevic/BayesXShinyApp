
library(whisker) # logicless templating system

template <- "

# R code generated by BayesXShiny app
# on: {{on}}
# user: {{user}}

library(BayesXShinyApp)

fit <- bayesX('{{prg_path}}')
output <- bayesXOutput(fit)
params <- parameters(output)

# Data visible to RExpression in App
Data <- do.call(append, list(params, attr(params, 'X')))

{{Rcode}}

"

create_RScript <- function(tmpl = template,
                           on = Sys.time(),
                           user = Sys.info()[["user"]],
                           prg_path,
                           Rcode){
  
  rscript <- whisker.render(tmpl, list(prg_path = prg_path,
                                     on = on, 
                                     user = user,
                                     Rcode = Rcode))
  
  return( rscript )
}



